<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<!-- <link href="../styles/site.css" rel="stylesheet"> -->
</head>
<body>
  
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/13.0.2/markdown-it.min.js" integrity="sha512-ohlWmsCxOu0bph1om5eDL0jm/83eH09fvqLDhiEdiqfDeJbEvz4FSbeY0gLJSVJwQAp0laRhTXbUQG+ZUuifUQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it-emoji/3.0.0/markdown-it-emoji.min.js" integrity="sha512-oEGO1WEAe1nZqI4pvhThiGh3IPUKfmelFhGR0PEOwv9kecA/dJ6FA67Qq8H6T+p/e4rh+lx2T3X7FnWVbYM1DA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    let json = {
        "scripts": {
            a: '',
            q: {
                
            } 
        }
    };
    $(document).ready(function(){
        _Ajax.get('index.json', Definition);
    });
    function Definition(data){
        var error = false;
        if(typeof data === 'object' && data.fail) {
            console.log(data.err.statusText, data.err);
            error = true;
            data = {
                "scripts": {
                    "a": "scripts/exp/util.js"
                }
            }
            //return;
        }
        json = data;
        var root = Root();
        var scriptsKeys = Object.keys(data.scripts);
        for(var i of scriptsKeys) {
            var ss = root + data.scripts[i];
            console.log(ss);
            if(error)
                ApplyScript('console.log("error")');
            else
                _Ajax.get(ss, ApplyScript);

        }
        console.log(Root());
        console.log(json);
    }
    function ApplyScript(s) {
        console.log('ApplyScript');
        window.eval(s);
    }

    function Root(){
        let r = new URL(window.location.href);
        return r.protocol + '//' + r.host + '/' + r.pathname.split('/')[1] + '/'
        // https://icehalli.github.io/docs/something/
    }
  </script>
</body>
</html>
