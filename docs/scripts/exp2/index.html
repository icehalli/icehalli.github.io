<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="../styles/site.css" rel="stylesheet">
</head>
<body>
  
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/13.0.2/markdown-it.min.js" integrity="sha512-ohlWmsCxOu0bph1om5eDL0jm/83eH09fvqLDhiEdiqfDeJbEvz4FSbeY0gLJSVJwQAp0laRhTXbUQG+ZUuifUQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it-emoji/3.0.0/markdown-it-emoji.min.js" integrity="sha512-oEGO1WEAe1nZqI4pvhThiGh3IPUKfmelFhGR0PEOwv9kecA/dJ6FA67Qq8H6T+p/e4rh+lx2T3X7FnWVbYM1DA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    $(document).ready(function(){
        get('index.html', function(data){
            console.log('resp', data);
            var next = Load('body', data);
            console.log(next);
        })
    });

    function Load(parent, data){        
        var layout = $('<div>');
        layout.html(data);
        var divs = layout.find("div[id]");
        console.log('divs', divs.length);
        var childrenElements = {};
        var templateUrl = '';
        var contentUrl = '';
        divs.each((i, el) => {
            var element = $(el);
            var id = element.attr('id');
            if(id) {
                childrenElements[id] = {tmpl: id+'.html', content: id+'.json'};
            }
            console.log(element);
            $(parent).append(element);
            // if(id==='nav')
            //     this.Nav = element;
            // if(id==='header')
            //     this.Header = element;
            // if(id==='content')
            //     this.Content = element;
        });
        // console.log('Elements', this.Elements);
        // console.log('Nav', this.Nav);
        // console.log('Header', this.Header);
        // console.log('Content', this.Content);
        return childrenElements;
    }

    function MockLayout() {
        return `<div id="nav">nav</div>
<div id="header">header</div>
<div id="content">content</div>`;
    }
    function MockLayoutJson() {
        return {
            nav: {
                id: 'nav',
                tmpl: 'nav.html',
                content: 'nav.json'
            },
            header: {
                id: 'header',
                tmpl: 'header.html',
                content: 'header.json'
            },
            content: {
                id: 'content',
                tmpl: 'content.html',
                content: 'content.json'
            },
        };
    }

    function MockNavHtml(){
        return `
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="https://icehalli.github.io/docs">Home</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul id='navlis' class="navbar-nav">
        
      </ul>
    </div>
  </div>
</nav>`;
    }

    function MocNavJson(){
        return {
            home: 'home',
            lis: [
                {
                    label: 'hello',
                    url: 'mbl.is'
                }
            ]
        }
    }

    function get(url, cb){
        if(url === 'index.html')
            cb(MockLayout());
        else if(url === 'index.json')
            cb(MockLayoutJson());
        else if(url === 'nav.html')
            cb(MockNavHtml())
        else if(url === 'nav.json')
            cb(MocNavJson())
    }

  </script>
</body>
</html>
